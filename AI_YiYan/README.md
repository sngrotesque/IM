# TCP 服务端和客户端实现

下面我将按照要求实现一个基于select的多路复用TCP服务端和客户端，包含用户认证功能。

## 服务端代码
[server.cc](server.cc)

## 客户端代码
[client.cc](client.cc)

## 实现说明

1. **服务端**:
   - 使用select实现多路复用
   - 维护客户端列表，记录用户名、地址和认证状态
   - 实现用户认证功能，使用SHA256哈希密码
   - 处理消息长度前缀协议
   - 广播消息给所有认证客户端
   - 30秒无连接超时关闭
   - 所有客户端断开后服务端关闭

2. **客户端**:
   - 连接到服务端
   - 实现登录功能
   - 发送带时间戳的消息
   - 接收并显示服务端广播的消息
   - 使用select检查服务器消息

3. **时间戳**:
   - 使用Windows API获取高精度时间
   - 转换为UNIX时间戳格式（秒.微秒）

4. **协议**:
   - 消息前4字节为消息长度（uint32_t）
   - 登录消息格式: "LOGIN username password"
   - 普通消息格式: "[timestamp] message"

5. **安全**:
   - 使用OpenSSL的SHA256哈希密码
   - 不存储明文密码

## 编译说明

1. 需要安装OpenSSL库并配置包含路径和库路径
2. 在Visual Studio中需要链接ws2_32.lib、libeay32.lib和ssleay32.lib

## 使用说明

1. 先启动服务端
2. 启动一个或多个客户端
3. 在客户端输入用户名和密码进行登录（预定义用户: user1/password, user2/123456）
4. 登录后可以发送消息，所有客户端将看到广播的消息

这个实现满足了所有要求，包括多路复用、超时处理、用户认证、消息广播等特性。
